(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CreativeEditorPageDesktop~ExperiencesAfterHomefeed~ExperiencesBeforeHomefeed~PinAnalyticsPageDesktop~2be2a0f0"],{KOHj:function(e,t,n){"use strict";var o=n("GyhR"),a=n.n(o),r=n("+U6O"),i=function(e){if(e.viewerId===e.account.id)return null;var t=e.account.imageMediumUrl&&!e.account.imageMediumUrl.includes("static/images/user/default");return a.a.createElement(r.c,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},a.a.createElement(r.c,{paddingX:1},a.a.createElement(r.a,{name:e.account.fullName||e.account.username,src:t?e.account.imageMediumUrl:"",size:e.large?"lg":"md"})),a.a.createElement(r.c,{marginLeft:3,flex:"grow"},a.a.createElement(r.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},e.account.fullName||e.account.username),e.account.email&&a.a.createElement(r.K,{color:"darkGray",size:"md",truncate:!0},e.account.email)))},c=n("rBws"),l=function(e){var t=Object.keys(e.accounts).length;return a.a.createElement(r.c,{position:"relative"},a.a.createElement(r.c,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),a.a.createElement("ul",null,Object.keys(e.accounts).map((function(t){var n=e.accounts[t];return a.a.createElement("li",{key:t},a.a.createElement(r.P,{onTouch:function(){return e.onClick(n)}},a.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},a.a.createElement(i,{account:n}))))}))))},s=n("IItM"),u=n("Fpqi"),d=n("Qo1m"),m=n("V0Gb"),f=n("3nbW"),p=n("iJ35"),h=n("ePT2"),b=n("QJ2d"),g=n("lglE"),_=n("+H5w"),w=n("UmN8"),y=n("k9eC"),v=n("lixz"),k=n("NmcB"),E=n("Y2BC"),O=n("rlRx");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,o,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,m=new Array(l),E=0;E<l;E++)m[E]=arguments[E];return o=this,c=(e=A(t)).call.apply(e,[this].concat(m)),n=!c||"object"!==C(c)&&"function"!=typeof c?S(o):c,j(S(S(n)),"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),j(S(S(n)),"handleAddAccount",(function(){Object(O.k)("add_account_click",null,n.props.container),n.props.container===s.a.ACCOUNT_SWITCHER_MODAL&&n.props.showLogin?n.props.showLogin():n.setState({showLoginModal:!0})})),j(S(S(n)),"trackProfileNavigateClick",(function(e){Object(v.g)(14),Object(O.k)("current_profile_".concat(e,"_click"),null,n.props.container)})),j(S(S(n)),"handleSwitch",(function(e){var t=n.props,o=t.container,a=t.requestContext,r=e.partner&&e.partner.is_create;n.setState({isLoading:!0}),Object(k.a)(101,{component:13369,element:11196}),Object(O.k)("switch_account_click",{destination_user_id:e.id},o);var i={get_user:!0,switch_account:e.id};u.a.getInstance().pauseImpressionsAndFlush(),Object(f.a)(i,{container:"account_switcher"},null,!0).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.resource_response&&t.resource_response.data&&t.resource_response.data.success){var i=new y.b(a,"web_pro_mode_header"),c=i.check("enabled_full_width")||i.check("enabled_full_width_employees"),l=r?"/":"/".concat(e.username);c&&(l="".concat(b.a.settings.CANONICAL_MAIN_URL,"/").concat(e.username,"/"),r&&(l=b.a.settings.CANONICAL_MAIN_URL)),Object(O.g)(l,e.id,o)}else Object(O.f)(e.id,o),n.setState({failedAccount:e,isLoading:!1})}),(function(t){throw Object(O.f)(e.id,o),n.setState({isLoading:!1}),t}))})),j(S(S(n)),"handleLinkedAccountSwitch",(function(e){var t=n.props,o=t.container,a=t.viewer;if(n.setState({isLoading:!0}),Object(k.a)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),u.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){var r={business_id:e.id,get_user:!0};Object(f.a)(r,{container:"account_switcher"},null,!0).then((function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(O.g)("/",e.id,o)}),(function(t){throw Object(O.f)(e.id,o),n.setState({isLoading:!1}),t}))}else h.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then((function(){Object(O.j)(a.id),Object(O.g)("/".concat(e.username),a.id,o)}),(function(e){throw Object(O.f)(a.id,o),n.setState({isLoading:!1}),e}))})),j(S(S(n)),"handleCloseModal",(function(){return n.setState({showLoginModal:!1})})),j(S(S(n)),"handleReauthAccount",(function(){Object(O.k)("switch_failure_prompt.login_click",null,n.props.container),n.setState({failedAccount:null,showLoginModal:!0})})),j(S(S(n)),"handleRemoveUnauthAccount",(function(e){Object(O.k)("switch_failure_prompt.account_removed",{removed_user_id:e},n.props.container),Object(O.j)(e),n.setState({failedAccount:null})})),j(S(S(n)),"getBusinessAccounts",(function(){var e=n.props,t=e.businessUser,o=e.viewer.partner;return t.data?(o&&o.is_linked_business?t.data.owners:t.data.businesses).reduce((function(e,t){return e[t.id]=Object(_.a)(g.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e}),{}):null})),j(S(S(n)),"renderAccounts",(function(e){return Object.keys(e).map((function(t,o){return a.a.createElement("li",{key:o},a.a.createElement(r.P,{onTouch:function(){n.handleSwitch(e[t])}},a.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},a.a.createElement(i,{large:!0,account:e[t],viewerId:n.props.viewer.id}))),o!==O.a-2&&a.a.createElement(r.j,null))}))})),j(S(S(n)),"renderPinnerButtons",(function(e){var t=n.props.onNavigateButtonClick;return a.a.createElement(p.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(e,"/")},a.a.createElement(r.d,{text:d.a._("View profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current profile","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:function(){n.trackProfileNavigateClick("button"),t&&t()}}))})),j(S(S(n)),"renderBusinessButtons",(function(e){var t=n.props,o=t.onNavigateButtonClick,i=t.enterProMode;return a.a.createElement(r.c,{display:"flex"},a.a.createElement(r.c,{marginEnd:2},a.a.createElement(w.a,{activate:!1,name:"web_pro_mode_header"},(function(e){var t=e.group.startsWith("enabled_full_width");return a.a.createElement(p.b,{to:t?"/":"/business/hub/",onClick:function(){Object(k.a)(101,{element:11236}),i&&i(),o&&o()}},a.a.createElement(r.d,{key:"biz-hub-button",text:d.a._("Business hub","Link to Business hub from account switcher"),accessibilityLabel:d.a._("Go to Business hub","Visit the Business hub for the current business user"),size:"sm",color:"red"}))}))),a.a.createElement(w.a,{activate:!1,name:"web_pro_mode_header"},(function(t){var i=t.group.startsWith("enabled_full_width");return a.a.createElement(p.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:i?"".concat(b.a.settings.CANONICAL_MAIN_URL,"/").concat(e,"/"):"/".concat(e,"/")},a.a.createElement(r.d,{text:d.a._("Profile","Visit a user profile from account switcher"),accessibilityLabel:d.a._("Go to current user profile","Visit a current user profile from account switcher"),size:"sm",onClick:function(){n.trackProfileNavigateClick("button"),o&&o()}}))})))})),n}var n,o,E;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.container===s.a.ACCOUNT_SWITCHER_MODAL&&Object(O.k)("modal.shown")}},{key:"componentWillUnmount",value:function(){this.props.container===s.a.ACCOUNT_SWITCHER_MODAL&&Object(O.k)("modal.dismiss")}},{key:"renderLoadingIndicator",value:function(){return this.state.isLoading?a.a.createElement(m.a,null):null}},{key:"render",value:function(){var e=this,t=this.props.viewer.partner,n=this.state,o=n.failedAccount,s=n.isLoading,u=n.showLoginModal,m=Object(O.e)(),f=this.getBusinessAccounts(),h=Object.keys(m).length,b=m[this.props.viewer.id];delete m[b.id];var g=b.imageLargeUrl&&!b.imageLargeUrl.includes("static/images/user/default");return a.a.createElement(r.c,{flex:"grow"},u&&a.a.createElement(c.a,{container:this.props.container,onClose:this.handleCloseModal,email:o?o.email:""}),o?a.a.createElement(r.c,{paddingX:4,paddingY:4,flex:"grow"},a.a.createElement(r.c,{marginBottom:3},a.a.createElement(r.K,null,d.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),a.a.createElement(i,{viewerId:b.id,account:o}),a.a.createElement(r.c,{marginTop:4},a.a.createElement(r.d,{text:d.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),a.a.createElement(r.c,{marginTop:3},a.a.createElement(r.d,{text:d.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:function(){return e.handleRemoveUnauthAccount(o.id)}}))):a.a.createElement(r.c,null,s&&this.renderLoadingIndicator(),a.a.createElement(r.c,null,a.a.createElement(r.c,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},a.a.createElement(r.c,{marginRight:4},a.a.createElement(p.b,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:"/".concat(b.username,"/")},a.a.createElement(r.P,{onTouch:function(){return e.trackProfileNavigateClick("avatar")}},a.a.createElement(r.a,{name:b.fullName||b.username,size:"lg",src:g?b.imageLargeUrl:""})))),a.a.createElement(r.c,{flex:"grow"},a.a.createElement(r.c,{marginBottom:2},a.a.createElement(r.K,{bold:!0,color:"darkGray",size:"md",truncate:!0},b.fullName||b.username),b.email&&a.a.createElement(r.K,{color:"darkGray",size:"md",truncate:!0},b.email)),t?this.renderBusinessButtons(b.username):this.renderPinnerButtons(b.username))),f?a.a.createElement(l,{accounts:f,onClick:this.handleLinkedAccountSwitch}):null,a.a.createElement(r.j,null),t&&t.is_linked_business?null:a.a.createElement(r.c,null,a.a.createElement("ul",null,this.renderAccounts(m)))),h<O.a&&!(t&&t.is_linked_business)&&a.a.createElement(r.c,{paddingX:4,paddingY:3},a.a.createElement(r.d,{text:d.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:function(){return e.handleAddAccount()}}))))}}])&&x(n.prototype,o),E&&x(n,E),t}(o.Component);t.a=Object(E.b)({key:"businessUser",name:"UserResource",options:function(e){return{field_set_key:"linked_partner",user_id:e.viewer.id}}})(P)},lx8N:function(e,t,n){"use strict";var o=n("GyhR"),a=n.n(o),r=n("KOHj"),i=n("rBws"),c=n("IItM"),l=n("Qo1m"),s=n("dsfX"),u=n("kIql"),d=n("+U6O"),m=n("9Y9K"),f=n("rlRx"),p=n("Y2BC");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=g(t).call(this,e),n=!a||"object"!==h(a)&&"function"!=typeof a?w(o):a,y(w(w(n)),"componentDidMount",(function(){Object(f.i)(n.props.viewer,n.props.businessUser.data)})),y(w(w(n)),"showLogin",(function(){return n.setState({showLoginModal:!0})})),y(w(w(n)),"hideLogin",(function(){return n.setState({showLoginModal:!1})}));var r=n.props.showAddAccount;return n.state={showLoginModal:!!r},n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.customTaglineText,n=e.hideAccountSwitchValueProp,o=e.onDismiss,u=e.showAddAccount,m=e.viewer,f=e.enterProMode;return this.state.showLoginModal?a.a.createElement(i.a,{container:c.a.ACCOUNT_SWITCHER_MODAL,onClose:u?o:this.hideLogin,customTaglineText:t,hideAccountSwitchValueProp:n}):a.a.createElement(d.c,{position:"relative"},a.a.createElement(s.b,{accessibilityModalLabel:l.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts"),size:"sm",heading:l.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),accessibilityCloseLabel:l.a._("Dismiss selection","Label for dismissing the modal"),onDismiss:o},a.a.createElement(r.a,{container:c.a.ACCOUNT_SWITCHER_MODAL,showLogin:this.showLogin,viewer:m,enterProMode:f})))}}])&&b(n.prototype,o),u&&b(n,u),t}(o.Component);t.a=Object(m.compose)(u.a,Object(p.b)({name:"UserResource",key:"businessUser",options:function(e){return{username:e.viewer.username,field_set_key:"linked_partner"}}}))(v)},rBws:function(e,t,n){"use strict";var o=n("GyhR"),a=n.n(o),r=n("Ivf5"),i=n("kpxY"),c=n("Qo1m"),l=n("plGG"),s=(n("hvnN"),n("ggpB")),u=n("+U6O"),d={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}},m=function(e){var t=function(e){Object(s.a)("unauth.account_switcher_modal.".concat(e))},n=e.renderContent;return a.a.createElement("div",{style:d.mask},a.a.createElement(l.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),a.a.createElement("div",{className:"AccountSwitcherModal",onClick:function(){t("empty_space_click"),(0,e.onCloseClick)()},role:"dialog",style:d.scroller},a.a.createElement("div",{onClick:function(e){e.stopPropagation()},role:"dialog",style:d.modalContainer},n(),a.a.createElement("button",{"aria-label":c.a._("close","accessible label for close button"),onClick:function(){t("close_button_click"),(0,e.onCloseClick)()},style:d.closeButton},a.a.createElement(u.n,{accessibilityLabel:c.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))},f=n("73jm");t.a=Object(r.connect)()((function(e){return o.createElement(m,{onCloseClick:function(){e.onClose&&e.onClose()},renderContent:function(){return o.createElement(u.c,{display:"flex",justifyContent:"center",flex:"grow"},o.createElement(i.a,{container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:f.b.login,signupSource:f.b.login,customLoginTagline:e.customTaglineText||c.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account")}))}})}))}}]);
//# sourceMappingURL=pjs-CreativeEditorPageDesktop~ExperiencesAfterHomefeed~ExperiencesBeforeHomefeed~PinAnalyticsPageDesktop~2be2a0f0-8aa7eb8b8902725aa658.js.map
