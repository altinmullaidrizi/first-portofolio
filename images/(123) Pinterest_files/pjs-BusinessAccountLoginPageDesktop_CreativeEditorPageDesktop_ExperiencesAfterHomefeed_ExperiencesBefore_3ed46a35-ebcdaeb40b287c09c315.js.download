(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["BusinessAccountLoginPageDesktop~CreativeEditorPageDesktop~ExperiencesAfterHomefeed~ExperiencesBefore~3ed46a35"],{"2rhI":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return c})),t.d(n,"d",(function(){return u})),t.d(n,"c",(function(){return s}));var o=t("hvnN"),r=t.n(o),a=t("QJ2d"),i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},c=function(e){return e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER},u=(r.a.shape({credentials:r.a.shape({}),userData:r.a.shape({}),type:r.a.oneOf(Object.values(i))}),function(e){return e in a.a.settings.MINIMUM_AGE_BY_EU_COUNTRY}),s=function(e){return a.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)}},"3nbW":function(e,n,t){"use strict";var o=t("f5ca"),r=t("oFGA"),a=t("/YZq"),i=t("ePT2"),c=t("PhUE"),u=t("QJ2d"),s=t("D+W/"),_=t("ggpB"),l=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[105,"FACEBOOK_ACCOUNT_NOT_LINKED"],[12,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[16,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[77,"INVALID_PASSWORD_FB_USER"],[78,"INVALID_PASSWORD_ERROR_CODE"],[79,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[83,"LOGIN_POLICY_VIOLATION_USER"],[85,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[93,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[8,"API_LIMIT_EXCEEDED_ERROR"],[9,"API_EVENT_BLOCKED_ERROR"],[19,"USER_IN_SAFE_MODE"],[84,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[85,"LOGIN_BAD_PASSWORD_ASK_RESET"],[1201,"LOGIN_MFA_REQUIRED"],[30,"LOGIN_USER_NOT_FOUND"],[88,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"]]);function g(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unknown_source",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var r=e.http_status===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS?s.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code,a=r;l.has(r)&&(a=l.get(r));var i=n.container;o?Object(_.a)("unauth_web_client_cctld_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(t)):Object(_.a)("unauth_web_client_login_api_error.".concat(String(a),".").concat(i||"unknow_container",".").concat(t))}}var d=t("DU5A"),f=t("2rhI"),O=t("HLgS");function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),o.forEach((function(n){m(e,n,t[n])}))}return e}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var p=a.a.getLogger("UserLogin"),h=a.a.getLogger("AuthHandshake"),b=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?f.a.FACEBOOK:e.google_open_id_token?f.a.GOOGLE_ONE_TAP:e.gplus_id_token?f.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?f.a.EMAIL:f.a.OTHER},A=function(e,n){var t="referrer_unknown";try{var o=document.referrer;t=o?o.indexOf("/t.co/")>-1?"twitter":o.indexOf("google.")>-1?"google":o.indexOf("bing.")>-1?"bing":o.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(s){}var r=b(e),a=n===Object(n)?n.hybridTier:"tier_unknown",i=n===Object(n)?n.container:"container_unknown";Object(_.a)("login.referrer."+t+"."+r),Object(_.a)("login.container."+i+"."+r),Object(_.a)("login.type."+r);var c=b(e)||"method_unknown",u=n.page||"page_unknown";e.gplus_autologin?Object(_.a)("web_autologin_google"):e.facebook_autologin?Object(_.a)("web_autologin_facebook"):Object(_.a)("web_login.".concat(c,".success.").concat(u,".").concat(i,".").concat(t,".").concat(a))},R=function(e,n){Object(_.a)("web_cross_domain_login.".concat(e,".").concat(b(n)))},S=function(e){return!e.mfa_resend&&!!e.username_or_email},I=function(e,n){return R("attempt",e),o.default.loginUser(e).then((function(t){if(t&&t.data){R("success_with_token",e);var r=t.data;return o.default.exchangeTokenAndSetSession(r).then((function(t){return R("success_token_exchanged",e),A(e,n),h.debug("Cross domain login successful"),Promise.resolve()}),(function(n){throw R("success_token_not_exchanged",e),h.error("Failed to set session for current user; "+n.message),n}))}throw R("success_without_token",e),h.error("No custom access token in cross domain login response"),new Error}),(function(t){throw R("failure",e),g(t,n,b(e),!0),h.error("Failed to login user; "+t.message),t}))};n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]),o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(S(e)){var s=u.a.settings.CORS_HANDSHAKE_DOMAINS;if(-1!==s.indexOf(r.a.instance.origin))return I(e,n)}e.switch_account&&(e.get_user=!!t||e.get_user);var _=t?null:c.b.localStorage.getItem("visitedPagesBeforeLogin"),l=E({},e,{app_type_from_client:5,visited_pages_before_login:_?JSON.stringify(_):null,recaptchaToken:o,tokenV3:a}),f=i.a.create("UserSessionResource",l),m={showError:!1,async:!0};return f.callCreate(m).then((function(t){return p.debug("Login, successful",t),A(e,n),Object(d.g)(!1),Object(O.b)("login").then((function(){return t}))}),(function(t){return g(t,n,b(e)),Promise.reject(t)}))}},"73jm":function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"b",(function(){return i}));var o=t("hvnN"),r={login:"login",loginMfa:"loginMfa",signup:"signup",personalizedLogin:"personalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",FBEmailCollection:"FBEmailCollection",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist"},a={login:"login",loginMfa:"loginMfa",signup:"signup",signupOrPersonalizedLogin:"signupOrPersonalizedLogin",socialSignupWithAge:"socialSignupWithAge",FBEmailRerequest:"FBEmailRerequest",emailConfirmation:"emailConfirmation",magicLinkConfirmation:"magicLinkConfirmation",FBEmailAlreadyExist:"FBEmailAlreadyExist",FBEmailCollection:"FBEmailCollection",respondMessage:"respondMessage"},i={boardPage:"boardPage",boardInvite:"boardInvite",defaultSource:"defaultSource",homePage:"homePage",mwebDefaultSource:"mwebDefaultSource",invite:"invite",login:"login",userFollow:"userFollow",userProfilePage:"userProfilePage",saveButton:"saveButton",actionButton:"actionButton",signupButton:"signupButton",personalizedFlyout:"personalizedFlyout",navigateBoard:"navigateBoard",navigatePin:"navigatePin",navigateInterest:"navigateInterest",unauthHeader:"unauthHeader",unauthBanner:"unauthBanner",giftWrap:"giftWrap",loginMfa:"loginMfa"};t.n(o).a.oneOf([i.boardPage,i.boardInvite,i.defaultSource,i.giftWrap,i.homePage,i.invite,i.login,i.mwebDefaultSource,i.navigateBoard,i.navigatePin,i.navigateInterest,i.saveButton,i.signupButton,i.unauthBanner,i.unauthHeader,i.userFollow,i.userProfilePage])},DU5A:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"e",(function(){return c})),t.d(n,"f",(function(){return u})),t.d(n,"h",(function(){return s})),t.d(n,"d",(function(){return _})),t.d(n,"g",(function(){return l})),t.d(n,"c",(function(){return g})),t.d(n,"b",(function(){return d}));var o=t("WQSK"),r=t("PhUE"),a=t("2cJX");function i(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";arguments.length>3&&arguments[3],arguments.length>4&&arguments[4];return n?a.a.tier1:t&&t.includes("yahoo.co.jp")&&"JP"===e?a.a.tier1:(e=e||"",a.e.has(e)?a.a.tier1:a.g.has(e)?a.a.tier2:a.a.tier3)}function c(){o.b("hasBeenShownLoginModalInOpen","true",a.c)}function u(e){r.b.sessionStorage.setItem("uimb",!!e)}function s(){return r.b.sessionStorage.getItem("uimb")||!1}function _(e){return void 0!==e&&r.b.sessionStorage.setItem("mdfu",e),r.b.sessionStorage.getItem("mdfu")||0}function l(e){r.b.localStorage.setItem("uoiou",!!e)}function g(){return r.b.localStorage.getItem("uoiou")||!1}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g()||!e&&s()}},IItM:function(e,n,t){"use strict";n.a={ACCOUNT_SWITCHER_FLYOUT:"account_switcher_flyout",ACCOUNT_SWITCHER_MODAL:"account_switcher_modal",ACCOUNT_RECOVERY:"account_recovery",BOARD_INVITE:"board_invite",CLOSEUP:"closeup",CLOSEUP_BANNER:"closeup_banner",FOLLOW_BUTTON:"followbtn",GOOGLE_ONE_TAP:"google_one_tap_modal",LOGIN_PAGE:"login_page",INSPIRED_BANNER:"inspired_banner",MFA_LOGIN_PAGE:"mfa_login_page",HYBRID_CLICKTHROUGH:"hybrid_clickthrough",HYBRID_BANNER:"hybrid_banner",PIN_GRID:"pin_grid",PIN_IMAGE:"pin_image",RESPONSE_FLYOUT:"response_flyout",UNAUTH_BANNER:"unauth_banner",UNAUTH_HEADER:"unauth_header"}},V0Gb:function(e,n,t){"use strict";var o=t("GyhR"),r=t.n(o),a=t("Qo1m"),i=t("+U6O"),c={loadingIndicatorMask:{position:"absolute",backgroundColor:"#fff",top:"0",left:"0",right:"0",bottom:"0",opacity:"0.7",borderRadius:"8px",zIndex:"100"},spinner:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:"1",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"101"}};n.a=function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:c.spinner},r.a.createElement(i.G,{accessibilityLabel:a.a._("Loading"),show:!0})),r.a.createElement("div",{style:c.loadingIndicatorMask}))}},f5ca:function(e,n,t){"use strict";t.r(n);t("oiDG");var o=t("XQD6"),r=t("D+W/"),a=t("oFGA"),i=t("/YZq"),c=t("2XPX"),u=t.n(c),s=t("ePT2"),_=t("QJ2d"),l=t("ggpB"),g=t("q579"),d=i.a.getLogger("AuthHandshake"),f={_parseJson:function(e){return e.json()},_throwError:function(e){var n=new Error(e.statusText);throw n.response=e,f._reconstructError(n),n},_checkStatus:function(e){return 200===e.status||401===e.status?e:(f._throwError(e),{})},_crossDomainRequest:function(e,n,t){if("GET"!==t&&"POST"!==t)return Promise.resolve({});var o={credentials:"include",mode:"cors"};return"POST"===t&&(o.method="POST",o.body=n,o.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":a.a.instance.unauth_id},a.a.instance.unauth_id||Object(l.a)("unauth.auth_handshake.cross_domain.no_unauth_id.".concat(t))),fetch(e,o).then(f._checkStatus).then(f._parseJson).then((function(e){return"success"===e.status?Promise.resolve(e):e.code===r.a.LOGIN_MFA_REQUIRED?(e.api_error_code=e.code,Promise.reject(e)):(f._throwError(e),{})})).catch((function(e){throw e}))},_reconstructError:function(e){!e.api_error_code&&e.response&&(e.api_error_code=e.response.code,e.message=e.response.message)},_shouldRedirectToCanonical:function(){var e=_.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/canonical/";return f._crossDomainRequest(e,"","GET")},_redirectToCanonical:function(){var e="";if(window.location.search){var n=u.a.parse(window.location.search.substring(1));n.originalUrl&&(e=n.originalUrl)}e||(e=window.location.pathname+window.location.search),e.startsWith("/")||(e="/".concat(e));var t=_.a.settings.CANONICAL_MAIN_URL;Object(o.a)("".concat(t).concat(e))},verifyAndRedirectToCanonical:function(){return f._shouldRedirectToCanonical().then((function(e){e&&e.data&&f._redirectToCanonical()}))},_verifyAndGetToken:function(){var e=_.a.settings.ACCOUNTS_PINTEREST_URL+"/v3/handshake/verify/";return f._crossDomainRequest(e,"","GET")},exchangeTokenAndSetSession:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=s.a.create("HandshakeSessionResource",{token:e,isRegistration:n});return t.callCreate()},verifyLoggedInStatus:function(){f._verifyAndGetToken().then((function(e){if(e&&e.data){var n=e.data;f.exchangeTokenAndSetSession(n).then((function(e){window.location.reload()}),(function(e){d.error("Failed to set session for current user; "+e.message)}))}else d.error("No custom access token in cross domain verify response")}),(function(e){}))},_setUpRegisterParameters:function(e){var n={};if(n.email=e.email||"",n.username=e.username||"",n.password=e.password||"",n.first_name=e.first_name||"",n.last_name=e.last_name||"",n.country=e.country||"",n.locale=a.a.instance.locale,n.referrer=a.a.instance.referrer,e.age){var t=new Date;t.setFullYear(t.getFullYear()-e.age);var o=parseInt(t/1e3,10);n.birthday=o.toString()}if(e.custom_gender&&(n.custom_gender=e.custom_gender),e.gender&&(n.gender=e.gender),e.business_name&&(n.account_type=e.account_type,n.business_name=e.business_name,n.first_name=e.business_name),a.a.instance.invite_code&&(n.invite_code=a.a.instance.invite_code),e.facebook_id){var r=a.a.instance.facebook_token||e.facebook_token||"";r||d.debug("Facebook token is not being set during login call."),n.facebook_id=e.facebook_id,n.facebook_token=r,n.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(n.password=e.password||"",n.one_time_code=e.gplus_code,n.id_token=e.gplus_id_token,n.redirect_uri=e.gplus_redirect_uri);return g.a.getQueryStringFromObject(n)},_setUpLoginParameters:function(e){var n={};if(e.username_or_email&&(n.username_or_email=e.username_or_email.trim(),n.password=e.password,n.referrer=a.a.instance.referrer),e.facebook_id){var t=a.a.instance.facebook_token||e.facebook_token||"";t||d.debug("Facebook token is not being set during login call."),n.facebook_id=e.facebook_id,n.facebook_token=t,n.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(n.gplus_id_token=e.gplus_id_token,n.gplus_access_token=e.gplus_access_token,n.gplus_expires_at=e.gplus_expires_at,n.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(n.mfa_token=e.mfa_token),g.a.getQueryStringFromObject(n)},_getRegisterRequestUrl:function(e){var n="/v3/register/email/handshake/";return e.facebook_id&&(n="/v3/register/facebook/handshake/"),(e.gplus_code||e.gplus_id_token)&&(n="/v3/register/gplus/handshake/"),e.business_name&&(n="/v3/register/partner/handshake/"),_.a.settings.ACCOUNTS_PINTEREST_URL+n},_getLoginRequestUrl:function(e){var n="/v3/login/handshake/";return e.facebook_id&&(n="/v3/login/facebook/handshake/"),e.gplus_id_token&&(n="/v3/login/gplus/handshake/"),e.mfa_token&&(n="/v3/login/mfa/handshake/"),_.a.settings.ACCOUNTS_PINTEREST_URL+n},registerUser:function(e){var n=f._getRegisterRequestUrl(e),t=f._setUpRegisterParameters(e);return f._crossDomainRequest(n,t,"POST")},loginUser:function(e){var n=f._getLoginRequestUrl(e),t=f._setUpLoginParameters(e);return f._crossDomainRequest(n,t,"POST")}};n.default=f},rlRx:function(e,n,t){"use strict";var o=t("XQD6"),r=t("D+W/"),a=t("IItM"),i=function(e){return"undefined"!=typeof window?window.localStorage.getItem(e):null},c=function(e,n){"undefined"!=typeof window&&window.localStorage.setItem(e,n)},u={getAccounts:function(){return i(r.a.MULTIPLE_ACCOUNTS)},getAccountsJSON:function(){return u.getAccounts()?JSON.parse(u.getAccounts()):{}},getGroupId:function(){var e=i(r.a.MULTIPLE_ACCOUNTS_GROUP);return e?JSON.parse(e):null},setAccounts:function(e){return c(r.a.MULTIPLE_ACCOUNTS,e)},setGroupId:function(e){return c(r.a.MULTIPLE_ACCOUNTS_GROUP,JSON.stringify(e))}},s=u,_=t("QzGC"),l=t.n(_),g=t("dg2R"),d=t("ggpB");function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),o.forEach((function(n){O(e,n,t[n])}))}return e}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",(function(){return E})),t.d(n,"e",(function(){return m})),t.d(n,"d",(function(){return p})),t.d(n,"c",(function(){return h})),t.d(n,"k",(function(){return b})),t.d(n,"b",(function(){return A})),t.d(n,"j",(function(){return R})),t.d(n,"i",(function(){return S})),t.d(n,"g",(function(){return I})),t.d(n,"f",(function(){return N})),t.d(n,"h",(function(){return v}));var E=4,m=function(){return s.getAccountsJSON()},p=function(){return Object.keys(m()).length},h=function(){var e;return O(e={},r.a.MULTIPLE_ACCOUNTS,s.getAccountsJSON()),O(e,r.a.MULTIPLE_ACCOUNTS_GROUP,s.getGroupId()),e},b=function(e,n,t){var o=s.getGroupId();o||(o=function(){var e=l()();return Object(d.c)("".concat("web_account_switcher",".utils.group_created"),{group_id:e,group_count:p()}),e}(),s.setGroupId(o));var r={group_id:o,group_count:p()},i="";t&&(i=t===a.a.ACCOUNT_SWITCHER_MODAL?"modal.":"flyout."),Object(d.c)("".concat("web_account_switcher",".").concat(i).concat(e),Object.assign({},n,r))},A=function(e,n,t){var o=s.getAccountsJSON();o[e.id]=function(e){var n={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return n.fullName&&n.imageMediumUrl&&n.imageLargeUrl||b("utils.incomplete_user_values"),e.partner&&e.partner.is_create?f({},n,{partner:{is_create:e.partner.is_create}}):n}(e),s.setAccounts(JSON.stringify(o)),n&&t&&b("new_account_add_success",{method:n,user_added:e.id},t)},R=function(e){var n=s.getAccountsJSON();delete n[e],s.setAccounts(JSON.stringify(n))},S=function(e,n){if(!s.getAccounts()||e&&!(e.id in m())){if(e.partner&&e.partner.is_linked_business&&n)return void A(f({},e,{email:n.partner&&n.partner.is_linked_business?n.partner.biz_ownership_email:""}));A(e)}},I=function(e,n,t){b("switch_account_success",{destination_user_id:n},t),Object(o.a)(e)},N=function(e,n){g.c.resume(g.a),b("switch_account_failure",{destination_user_id:e},n)},v=function(e){g.c.resume(g.b),Object(d.a)("web.dismiss_account_switcher.".concat(e))}}}]);
//# sourceMappingURL=pjs-BusinessAccountLoginPageDesktop~CreativeEditorPageDesktop~ExperiencesAfterHomefeed~ExperiencesBefore~3ed46a35-ebcdaeb40b287c09c315.js.map
