(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["BoardSectionPageDesktop~ExperienceBizNuxContainer~ImagesFeedPageDesktop~PinBetterSaveCommon~PinBookm~58bd55d7"],{A6bX:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("7Iyi");function o(e,t){return function(n){return n(Object(r.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}}},"J+kV":function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return d}));function o(e){return function(t,n){var r=[];t&&/\S/.test(t)||r.push(e.message);var o={errors:r,warnings:[]};return n&&n(o),o}}function i(e){return function(t,n){var r=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i"),o=[];(t=t&&t.trim())&&!t.match(r)&&o.push(e.message);var i={errors:o,warnings:[]};return n&&n(i),i}}function a(e){return function(t,n){var r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);var o={errors:r,warnings:[]};return n&&n(o),o}}function c(e){return function(t,n){var r=[];(e.should_trim||!1)&&(t=t&&t.trim());var o=t.length;e.min&&o<e.min?r.push(e.minErrorString):e.max&&o>e.max&&r.push(e.maxErrorString);var i={errors:r,warnings:[]};return n&&n(i),i}}function u(e){return function(t,n){var r=[];e.pattern.test(t)||r.push(e.message);var o={errors:r,warnings:[]};return n&&n(o),o}}function d(e,t){var n,o=e.map((function(e){return e(t).errors}));return(n=[]).concat.apply(n,r(o))}},"QMJ+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("GyhR"),o=n("D+W/"),i=n("q579"),a=n("+U6O");function c(e){var t=e.url,n=e.description,c=e.color;return c=c||o.a.DEFAULT_IMAGELESS_PIN_COLOR,r.createElement(a.c,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:c}}},r.createElement(a.c,{maxHeight:200,padding:4,overflow:"hidden"},t&&r.createElement(a.c,{marginBottom:2},r.createElement(a.K,{color:"white",size:"xs"},i.a.parse(t).hostname||t)),r.createElement(a.c,{maxHeight:144},r.createElement(a.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))}},Reqc:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n("GyhR"),o=n("+U6O");function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a={__style:{borderRadius:4}},c={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function u(){return r.createElement(o.c,{alignItems:"center",color:"red",dangerouslySetInlineStyle:a,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},r.createElement(o.c,{dangerouslySetInlineStyle:c,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}function d(e){var t=e.disabled,n=e.submitting,a=e.text,c=i(e,["disabled","submitting","text"]);return r.createElement(o.c,{display:"flex",position:"relative"},n&&r.createElement(u,null),r.createElement(o.d,Object.assign({},c,{inline:!0,color:"red",type:"submit",text:a,disabled:t||n})))}},kQRf:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("POeB"),o=n("Qo1m"),i=2171,a=2172,c=2173;function u(e){r.a.showError(function(e){switch(e.api_error_code){case i:case a:case c:return o.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},"t3w/":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n("A6bX"),o=n("wCwf"),i=n("cjc9"),a=n("jvv/"),c=n("ePT2"),u=n("evwu"),d=n("eB/M"),s=n("kQRf"),l=function(e){return Object(o.a)(e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,e.sectionId||e.boardId)};function f(e,t){var n=e.source,o=e.target;o.boardId!==n.boardId?(t(Object(u.b)(n.boardId,"pin_count")),t(Object(u.b)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t(Object(u.b)(o.boardId,"pin_count")),n.sectionId&&t(Object(r.a)(n.sectionId)),o.sectionId&&t(Object(r.a)(o.sectionId))}function p(e){return function(t){var n=e.selectedPinIds,r=e.source,o=e.target;t(Object(a.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(i.a)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:n,itemType:"pin"})),f(e,t)}}function m(e){return function(t){return function(e,t){var n=e.inverseSelection,r=e.selectedPinIds,o=e.source,u=e.target;if(o.boardId===u.boardId&&(o.sectionId||null)===(u.sectionId||null))return Promise.reject();if(n){var f={board_id:o.boardId,new_board_id:u.boardId,old_section_id:o.sectionId||void 0,new_section_id:u.sectionId||void 0,pin_ids:r};return c.a.create("BulkEditSelectAllResource",f).callUpdate({showError:!1}).then((function(){return Promise.all([t(l(o)),t(l(u))])})).catch(s.a)}var p=function(e,n){t(Object(a.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:r,itemType:"pin"})),t(Object(i.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?d.a.SECTION_PINS:d.a.BOARD_PINS,itemIds:r,itemType:"pin"}))};p(o,u);var m=function(){return p(u,o)};if(u.boardId===o.boardId){if(u.sectionId){var b={section_id:u.sectionId,pins:r};return c.a.create("BoardSectionEditResource",b).callUpdate({showError:!1}).catch((function(e){m(),Object(s.a)(e)}))}var I={section_id:o.sectionId,pins:r};return c.a.create("BoardSectionPinsResource",I).callDelete({showError:!1}).catch((function(e){m(),Object(s.a)(e)}))}var h={board_id:u.boardId,section_id:u.sectionId||void 0,pin_ids:r};return c.a.create("BulkEditResource",h).callUpdate({showError:!1}).catch((function(e){m(),Object(s.a)(e)}))}(e,t).then((function(){return f(e,t)}))}}},vBjq:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Ivf5"),i=n("D+W/"),a=n("vI2X"),c=n("Qo1m"),u=n("Reqc"),d=n("KsVg"),s=n("9Y9K"),l=n("+U6O");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),n=!o||"object"!==f(o)&&"function"!=typeof o?I(r):o,h(I(I(n)),"onCreateSection",(function(){var e=n.props,t=e.board,r=e.dispatch,o=e.completeCreateSectionAction,i=e.pinImport;return n.setState({isSaving:!0}),r(Object(a.a)({boardId:t.id,name:n.state.inputName.trim(),pinImport:i})).then((function(e){n.setState({isSaving:!1,newSection:e}),o(e)})).catch((function(e){n.setState({createError:e.message,isSaving:!1})}))})),h(I(I(n)),"handleKeyDown",(function(e){var t=e.event,r=(e.value,n.state),o=r.createError,a=r.inputName;[i.a.KeyCode.ENTER,i.a.KeyCode.NUMPAD_ENTER].includes(t.which)&&!o&&a.trim()&&n.onCreateSection()})),h(I(I(n)),"handleChangeName",(function(e){var t=e.value;n.setState({createError:null,inputName:t})})),h(I(I(n)),"handleInputRef",(function(e){n.setState({inputRef:e})})),n.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},n}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.createError,o=n.inputRef;!o||t.inputRef&&!r||o.focus()}},{key:"render",value:function(){var e=this.props,t=e.onClearModal,n=e.showTitle,o=e.positionRelative,i=this.state,a=i.createError,d=i.inputName,s=i.isSaving,f=!!d.trim()&&!a;return r.createElement(l.c,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:o?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},n&&r.createElement(l.c,{marginTop:3,paddingX:6,paddingY:3},r.createElement(l.K,{size:"xl",bold:!0},c.a._("Add section","Title in the add section modal"))),r.createElement(l.c,{padding:3},r.createElement(l.c,{marginBottom:2},r.createElement(l.q,{htmlFor:"sectionEditName"},r.createElement(l.K,{size:"sm",color:a?"red":"gray"},c.a._("Name","Board section name")))),r.createElement(l.c,null,r.createElement(l.c,{ref:this.handleInputRef},r.createElement(l.M,{id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,errorMessage:a||"",placeholder:c.a._('Like "Lighting"',"Placeholder for board section name"),type:"text",value:d})))),r.createElement(l.j,null),r.createElement(l.c,{display:"flex",flex:"grow"}),r.createElement(l.j,null),r.createElement(l.c,{padding:6},r.createElement(l.c,{display:"flex",justifyContent:"between"},r.createElement(l.d,{onClick:t,text:c.a._("Cancel","cancel section add"),inline:!0}),r.createElement(u.b,{disabled:!f||s,onClick:this.onCreateSection,submitting:s,text:c.a._("Add","add a new section")}))))}}])&&p(n.prototype,o),d&&p(n,d),t}(r.Component);t.a=Object(s.compose)(Object(o.connect)(),d.a)(y)},vI2X:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n("wCwf"),o=n("cjc9"),i=n("t3w/"),a=n("ePT2"),c=n("evwu"),u=n("eB/M"),d=n("7Iyi");function s(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function l(e){var t=e.boardId,n=e.name,l=e.nameSource,f=e.pinImport,p=0;"RECOMMENDATION"===l?p=1:"EDITED_RECOMMENDATION"===l&&(p=2);var m={board_id:t,initial_pins:f&&!f.all?f.pinIds:[],name:n,name_source:p};return function(e){return a.a.create("BoardSectionResource",m).callCreate({showError:!1}).then((function(n){var a=n.resource_response.data;e(s(t,a)),e(Object(o.a)({feedId:t,feedType:u.a.BOARD_SECTIONS,itemIds:[a.id],itemType:"board_section"})),e(Object(c.b)(t,"pin_count")),e(Object(d.f)("BoardSectionsRepinResource",{board_id:t}));var l=f||{all:!1,pinIds:[]},p=l.all,m=l.pinIds;return p?new Promise((function(n,r){return e(Object(i.a)({inverseSelection:!0,selectedPinIds:m,source:{boardId:t,sectionId:null},target:{boardId:t,sectionId:a.id}})).then((function(){return n(a)})).catch(r)})):(m.length>0&&e(Object(r.a)(u.a.BOARD_PINS,t)),a)}))}}}}]);
//# sourceMappingURL=pjs-BoardSectionPageDesktop~ExperienceBizNuxContainer~ImagesFeedPageDesktop~PinBetterSaveCommon~PinBookm~58bd55d7-809253a02a638f9dda0c.js.map
